{% extends 'base.html' %}
{% load static %}
{% block title %} {{ block.super }} {% endblock title %}
{% block content %}
<div class="row">
    <h1>Password Entry Details</h1>
</div>
<table class="table table-stripped">
    {% comment %} <tr>
        <td>ID:</td>
        <td>{{ object.id }}</td>
    </tr> {% endcomment %}
        <td>Title:</td>
        <td>{{ object.title }}</td>
    </tr>
    <tr>
        <td>Username:</td>
        <td>{{ object.username }}</td>
    </tr>
    </tr>
    <tr>
        <td>Website:</td>
        <td><a href="{{ object.website }}" target="_blank">{{ object.website }}</a></td>
    </tr>
    <tr>
        <td>Password:</td>
        <td>
            <input id="password-field" type="password" value="{{ decrypted_password }}" readonly>
            <button onclick="toggleTextVisibility()">Toggle Visibility</button>
            <button onclick="copyToClipboard()">Copy</button>
        </td>
    </tr>
    <tr>
        <td>Is in Bookmarks:</td>
        <td>
            <input type="checkbox" name="is_in_bookmarks" {% if form.is_in_bookmarks.value %}checked{% endif %}>
        </td>
    </tr>
    <tr>
        <td>Created:</td>
        <td>{{ object.created_at }}</td>
    </tr>
    <tr>
        <td>Updated:</td>
        <td> {{ object.updated_at }}</td>
    </tr>
</table>


<!-- JavaScript code -->
<script>
    function copyToClipboard() {
      var textToCopy = document.getElementById("password-field").value;
      navigator.clipboard.writeText(textToCopy)
        .then(function() {
          alert("Text copied to clipboard!");
        })
        .catch(function(error) {
          console.error("Error copying text to clipboard:", error);
        });
    }
    
    function toggleTextVisibility() {
      var textField = document.getElementById("password-field");
      textField.type = textField.type === "password" ? "text" : "password";
    }
    
    window.addEventListener("DOMContentLoaded", function() {
      // Hide the text field on page load
      document.getElementById("password-field").type = "password";
    });
</script>

{% endblock content %}
