{% extends 'base.html' %}
{% load static %}
{% block title %} {{ block.super }} {% endblock title %}
{% block content %}
    {% if passwordentry.id %}
        <h1>Update password info</h1>
    {% else %}
        <h1>New password {{ decrypted_password }}</h1>
    {% endif %}
    <form method = "post" action="{{ request.path }}?password_id={{ password.id }}">
        {% csrf_token %}
        <div class="password-form">
            {{ form.as_p }}
        </div>
        <button type="submit">{% if passwordentry.id %}Update{% else %}Save{% endif %}</button>
        <a href="{% url 'password_entry_list' %}">Go Back</a>
        {% if passwordentry.id %}
            <a href="{% url 'password_entry_to_trash' passwordentry.pk %}">To trash</a>
        {% endif %}
    </form>

    <form>
        <input type="text" id="myText" value="Text to copy">
        <button type="button" onclick="copyToClipboard()">Copy</button>
        <button type="button" onclick="toggleTextVisibility()">Show/Hide</button>
      </form>
      

<!-- JavaScript code -->
<script>
    function copyToClipboard() {
      var textToCopy = document.getElementById("myText").value;
      navigator.clipboard.writeText(textToCopy)
        .then(function() {
          alert("Text copied to clipboard!");
        })
        .catch(function(error) {
          console.error("Error copying text to clipboard:", error);
        });
    }
    
    function toggleTextVisibility() {
      var textField = document.getElementById("myText");
      textField.type = textField.type === "password" ? "text" : "password";
    }
    
    window.addEventListener("DOMContentLoaded", function() {
      // Hide the text field on page load
      document.getElementById("myText").type = "password";
    });
</script>

{% endblock content %}
